# =============================================================================
# Environment Variables Template
# Renewable Energy IoT Monitoring System
# =============================================================================
# 
# Copy this file to .env and modify the values as needed for your environment.
# All variables have sensible defaults for development use.
#
# Usage: 
# - Local Development: cp env.example .env.local
# - Production: cp env.example .env.production
# =============================================================================

# =============================================================================
# DEPLOYMENT MODE CONFIGURATION
# =============================================================================

# Deployment mode: 'local' or 'production'
DEPLOYMENT_MODE=local

# =============================================================================
# MQTT BROKER CONFIGURATION (Eclipse Mosquitto)
# =============================================================================

# MQTT Port Configuration
# Production (Mikrus VPS): 40098, Local: 1883
MQTT_PORT=1883
MQTT_WS_PORT=9001

# MQTT Authentication
MQTT_ADMIN_USER=admin
MQTT_ADMIN_PASSWORD=admin_password_456

# MQTT Logging and Performance
MQTT_LOG_LEVEL=information
MQTT_MAX_CONNECTIONS=1000
MQTT_MAX_QUEUED_MESSAGES=100
MQTT_AUTOSAVE_INTERVAL=1800

# MQTT Configuration Files
MOSQUITTO_CONFIG_FILE=/mosquitto/config/mosquitto.conf
MOSQUITTO_PASSWORD_FILE=/mosquitto/config/passwd
MOSQUITTO_ACL_FILE=/mosquitto/config/acl

# =============================================================================
# INFLUXDB 2.X CONFIGURATION
# =============================================================================

# Port Configuration
# Production (Mikrus VPS): 40101, Local: 8086
INFLUXDB_PORT=8086

# Authentication & Access
# Admin user credentials for InfluxDB 2.x
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=admin_password_123
INFLUXDB_ADMIN_TOKEN=renewable_energy_admin_token_123

# Enable/disable authentication (false for development, true for production)
INFLUXDB_HTTP_AUTH_ENABLED=false

# Database Configuration
# Main database and organization names
INFLUXDB_DB=renewable_energy
INFLUXDB_ORG=renewable_energy_org
INFLUXDB_BUCKET=renewable_energy

# Data retention policy (30d = 30 days, 7d = 7 days, etc.)
INFLUXDB_RETENTION=30d

# Initial Setup
# Setup mode for first-time initialization
INFLUXDB_SETUP_MODE=setup

# Disable usage reporting to InfluxData
INFLUXDB_REPORTING_DISABLED=true

# Metadata directory path
INFLUXDB_META_DIR=/var/lib/influxdb2/meta

# Performance & Storage
# Data storage directories
INFLUXDB_DATA_DIR=/var/lib/influxdb2/data
INFLUXDB_WAL_DIR=/var/lib/influxdb2/wal
INFLUXDB_ENGINE_PATH=/var/lib/influxdb2/engine

# Compaction settings (0 = unlimited for development)
INFLUXDB_MAX_CONCURRENT_COMPACTIONS=0

# HTTP Configuration
# HTTP server bind address and port
INFLUXDB_HTTP_BIND_ADDRESS=:8086
INFLUXDB_HTTP_PORT=8086

# Connection limits (0 = unlimited for development)
INFLUXDB_HTTP_MAX_CONNECTION_LIMIT=0
INFLUXDB_HTTP_READ_TIMEOUT=30s

# Logging & Monitoring
# Log level: debug, info, warn, error
INFLUXDB_LOGGING_LEVEL=info

# Log format: auto, logfmt, json
INFLUXDB_LOGGING_FORMAT=auto

# Disable internal metrics collection
INFLUXDB_METRICS_DISABLED=true

# Enable profiling (false for production)
INFLUXDB_PPROF_ENABLED=false

# =============================================================================
# NODE-RED CONFIGURATION
# =============================================================================

# Port Configuration
# Production (Mikrus VPS): 40100, Local: 1880
NODE_RED_PORT=1880

# Node-RED Authentication
NODE_RED_USERNAME=admin
NODE_RED_PASSWORD=adminpassword

# Node-RED Credential Secret
NODE_RED_CREDENTIAL_SECRET=your-node-red-secret

# Node-RED Settings
NODE_RED_ENABLE_PROJECTS=true
NODE_RED_EDITOR_THEME=dark
NODE_RED_DISABLE_EDITOR=false
NODE_RED_DISABLE_FLOWS=false
NODE_RED_HOME=/data
NODE_RED_OPTIONS=--max-old-space-size=512
NODE_RED_SETTINGS_FILE=/data/settings.js
NODE_RED_USER_DIR=/data/

# Node-RED InfluxDB Integration
# InfluxDB connection settings for Node-RED
NODE_RED_INFLUXDB_URL=http://influxdb:8086
NODE_RED_INFLUXDB_ORG=renewable_energy_org
NODE_RED_INFLUXDB_BUCKET=renewable_energy
NODE_RED_INFLUXDB_TOKEN=renewable_energy_admin_token_123

# Node-RED MQTT Integration
MQTT_BROKER_HOST=localhost
MQTT_BROKER_PORT=1883
MQTT_USERNAME=admin
MQTT_PASSWORD=admin_password_456
MQTT_CLIENT_ID=node-red-client

# =============================================================================
# GRAFANA CONFIGURATION
# =============================================================================

# Port Configuration
# Production (Mikrus VPS): 40099, Local: 3000
GRAFANA_PORT=3000

# Grafana Authentication
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Grafana Server Configuration
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin
GF_USERS_ALLOW_SIGN_UP=false
GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource
GF_SECURITY_COOKIE_SECURE=false
GF_SERVER_ROOT_URL=http://localhost:3000
GF_SERVER_SERVE_FROM_SUB_PATH=false
GF_ANALYTICS_REPORTING_ENABLED=false
GF_ANALYTICS_CHECK_FOR_UPDATES=false
GF_LOG_LEVEL=info

# Grafana InfluxDB Integration
# InfluxDB data source settings for Grafana
GRAFANA_INFLUXDB_URL=http://influxdb:8086
GRAFANA_INFLUXDB_ORG=renewable_energy_org
GRAFANA_INFLUXDB_BUCKET=renewable_energy
GRAFANA_INFLUXDB_TOKEN=renewable_energy_admin_token_123

# =============================================================================
# NGINX REVERSE PROXY CONFIGURATION
# =============================================================================

# Nginx Port Configuration (for production with reverse proxy)
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# Nginx Server Configuration
NGINX_WORKER_CONNECTIONS=1024
NGINX_CLIENT_MAX_BODY_SIZE=100M
NGINX_KEEPALIVE_TIMEOUT=65

# Nginx Rate Limiting
NGINX_API_RATE_LIMIT=10r/s
NGINX_GENERAL_RATE_LIMIT=30r/s

# Nginx Logging
NGINX_ACCESS_LOG=/var/log/nginx/access.log
NGINX_ERROR_LOG=/var/log/nginx/error.log

# =============================================================================
# WEB APPLICATION CONFIGURATION (Under Development)
# =============================================================================

# API Service Configuration
API_PORT=3001
CORS_ORIGIN=http://localhost:5173
TEST_TOKEN=renewable_energy_admin_token_123

# Frontend Service Configuration
FRONTEND_PORT=5173
VITE_API_URL=http://localhost:3001
VITE_API_BASE_URL=http://localhost:3001/api

# Express Backend Configuration (Legacy - for reference)
EXPRESS_BACKEND_PORT=3001
EXPRESS_BACKEND_HOST=0.0.0.0
EXPRESS_BACKEND_CORS_ORIGIN=http://localhost:3002

# React Frontend Configuration (Legacy - for reference)
REACT_FRONTEND_PORT=3002
REACT_FRONTEND_HOST=0.0.0.0
REACT_FRONTEND_API_URL=http://localhost:3001

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development mode flags
DEV_MODE=true
DEBUG_MODE=false

# Data simulation settings
SIMULATION_ENABLED=true
SIMULATION_INTERVAL=5000

# Development ports (local development)
DEV_MQTT_PORT=1883
DEV_MQTT_WS_PORT=9001
DEV_INFLUXDB_PORT=8086
DEV_NODE_RED_PORT=1880
DEV_GRAFANA_PORT=3000
DEV_EXPRESS_PORT=3001
DEV_REACT_PORT=3002

# =============================================================================
# PRODUCTION SETTINGS (Mikrus VPS)
# =============================================================================

# Production ports (Mikrus VPS)
PROD_MQTT_PORT=40098
PROD_MQTT_WS_PORT=9001
PROD_INFLUXDB_PORT=40101
PROD_NODE_RED_PORT=40100
PROD_GRAFANA_PORT=40099
PROD_NGINX_HTTP_PORT=20108
PROD_NGINX_HTTPS_PORT=30108

# Production server configuration
PROD_SERVER_HOST=robert108.mikrus.xyz
PROD_SERVER_USER=root
PROD_SERVER_PORT=10108

# Production Grafana configuration
PROD_GRAFANA_ROOT_URL=http://robert108.mikrus.xyz:40099

# Security settings for production
# INFLUXDB_HTTP_AUTH_ENABLED=true
# INFLUXDB_LOGGING_LEVEL=warn
# INFLUXDB_METRICS_DISABLED=false
# INFLUXDB_PPROF_ENABLED=false

# Performance settings for production
# INFLUXDB_MAX_CONCURRENT_COMPACTIONS=4
# INFLUXDB_HTTP_MAX_CONNECTION_LIMIT=1000
# INFLUXDB_HTTP_READ_TIMEOUT=60s

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker network settings
DOCKER_NETWORK_NAME=iot-network
DOCKER_NETWORK_SUBNET=172.20.0.0/16

# Docker network settings (local development)
DOCKER_NETWORK_NAME_LOCAL=iot-network-local
DOCKER_NETWORK_SUBNET_LOCAL=172.21.0.0/16

# Docker container names
DOCKER_MOSQUITTO_CONTAINER=iot-mosquitto
DOCKER_INFLUXDB_CONTAINER=iot-influxdb2
DOCKER_NODE_RED_CONTAINER=iot-node-red
DOCKER_GRAFANA_CONTAINER=iot-grafana

# Docker container names (local development)
DOCKER_MOSQUITTO_CONTAINER_LOCAL=iot-mosquitto-local
DOCKER_INFLUXDB_CONTAINER_LOCAL=iot-influxdb2-local
DOCKER_NODE_RED_CONTAINER_LOCAL=iot-node-red-local
DOCKER_GRAFANA_CONTAINER_LOCAL=iot-grafana-local

# =============================================================================
# VOLUME CONFIGURATION
# =============================================================================

# Data persistence paths
INFLUXDB_DATA_PATH=./influxdb/data
INFLUXDB_BACKUP_PATH=./influxdb/backups
NODE_RED_DATA_PATH=./node-red/data
GRAFANA_DATA_PATH=./grafana/data
MOSQUITTO_DATA_PATH=./mosquitto/data

# Volume names
MOSQUITTO_DATA_VOLUME=mosquitto_data
MOSQUITTO_LOG_VOLUME=mosquitto_log
INFLUXDB_DATA_VOLUME=influxdb_data
NODE_RED_DATA_VOLUME=node_red_data
GRAFANA_DATA_VOLUME=grafana_data

# Volume names (local development)
MOSQUITTO_DATA_VOLUME_LOCAL=mosquitto_data_local
MOSQUITTO_LOG_VOLUME_LOCAL=mosquitto_log_local
INFLUXDB_DATA_VOLUME_LOCAL=influxdb_data_local
NODE_RED_DATA_VOLUME_LOCAL=node_red_data_local
GRAFANA_DATA_VOLUME_LOCAL=grafana_data_local

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log file paths
INFLUXDB_LOG_PATH=./influxdb/logs
NODE_RED_LOG_PATH=./node-red/logs
GRAFANA_LOG_PATH=./grafana/logs
MOSQUITTO_LOG_PATH=./mosquitto/log

# Log rotation settings
LOG_MAX_SIZE=100m
LOG_MAX_FILES=5

# =============================================================================
# BACKUP AND MAINTENANCE
# =============================================================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM

# =============================================================================
# MONITORING AND ALERTING
# =============================================================================

# Health check settings
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Alert thresholds
ALERT_DISK_USAGE_THRESHOLD=80
ALERT_MEMORY_USAGE_THRESHOLD=85
ALERT_CPU_USAGE_THRESHOLD=90

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# SSL/TLS settings (for production)
# SSL_ENABLED=false
# SSL_CERT_PATH=./ssl/cert.pem
# SSL_KEY_PATH=./ssl/key.pem

# API rate limiting
API_RATE_LIMIT=1000
API_RATE_LIMIT_WINDOW=1m

# =============================================================================
# CUSTOMIZATION
# =============================================================================

# Custom device types (comma-separated)
DEVICE_TYPES=photovoltaic,wind_turbine,biogas_plant,heat_boiler,energy_storage

# Custom locations (comma-separated)
DEVICE_LOCATIONS=site_a,site_b,site_c

# Custom retention policies (format: bucket_name:retention)
CUSTOM_RETENTION_POLICIES=system_metrics:7d,alerts:90d,analytics:365d

# =============================================================================
# TIME ZONE AND LOCALE
# =============================================================================

# System timezone
TZ=UTC

# =============================================================================
# NOTES AND COMMENTS
# =============================================================================

# This file contains all environment variables for the renewable energy
# monitoring system. Modify values according to your specific requirements.
#
# Important security notes:
# - Change default passwords in production
# - Enable authentication in production
# - Use strong tokens for API access
# - Enable SSL/TLS in production
# - Regularly rotate credentials
#
# Performance notes:
# - Adjust memory and CPU limits based on your hardware
# - Monitor disk usage for time-series data
# - Configure appropriate retention policies
# - Use connection pooling for high-traffic scenarios
#
# Development notes:
# - Authentication is disabled for easy development
# - All limits are set to unlimited for flexibility
# - Debug logging is enabled for troubleshooting
# - Metrics collection is disabled to reduce overhead
#
# Port Configuration:
# - Local Development: Uses standard ports (1883, 8086, 1880, 3000)
# - Production (Mikrus VPS): Uses Mikrus ports (40098, 40101, 40100, 40099)
# - Nginx Reverse Proxy: Uses ports 20108 (HTTP) and 30108 (HTTPS)
#
# Service URLs:
# - Local Development:
#   * Grafana: http://localhost:3000
#   * Node-RED: http://localhost:1880
#   * InfluxDB: http://localhost:8086
#   * MQTT: localhost:1883
#
# - Production (Mikrus VPS):
#   * Grafana: http://robert108.mikrus.xyz:40099
#   * Node-RED: http://robert108.mikrus.xyz:40100
#   * InfluxDB: http://robert108.mikrus.xyz:40101
#   * MQTT: robert108.mikrus.xyz:40098
#
# - Nginx Reverse Proxy (Production):
#   * Grafana: http://robert108.mikrus.xyz:20108/grafana
#   * Node-RED: http://robert108.mikrus.xyz:20108/nodered
#   * InfluxDB: http://robert108.mikrus.xyz:20108/influxdb 