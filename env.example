# =============================================================================
# Environment Variables Template
# Renewable Energy IoT Monitoring System
# =============================================================================
# 
# This is a template file with all environment variables.
# Copy this file to create your environment-specific configuration:
# 
# Local Development:
#   cp env.example .env.local
#   # Edit .env.local and add your passwords/keys
# 
# Production:
#   cp env.example .env.production
#   # Edit .env.production and add your production passwords/keys
# 
# Usage:
#   docker-compose --env-file .env.local up -d        # Local
#   docker-compose --env-file .env.production up -d   # Production
# =============================================================================

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
# Server hostname or IP address
SERVER_IP=localhost
# SSH port (for production deployments)
SERVER_PORT=22

# =============================================================================
# SERVICE PORTS
# =============================================================================
# Nginx Reverse Proxy Ports
# HTTP port for Nginx (local: 8080, production: 20108)
NGINX_PORT=8080
# HTTPS port for Nginx (when SSL is configured, production: 30108)
NGINX_HTTPS_PORT=443

# MQTT Broker Ports
# MQTT broker port (local: 1883, production: 40098)
MQTT_PORT=1883
# MQTT WebSocket port
MQTT_WS_PORT=9001

# Internal Service Ports (used internally, exposed via Nginx)
# Note: These are internal ports. Services are accessed via Nginx reverse proxy
NODE_RED_PORT=1880
INFLUXDB_PORT=8086
GRAFANA_PORT=3000
API_PORT=3001
FRONTEND_PORT=80

# =============================================================================
# MQTT BROKER (Mosquitto) CONFIGURATION
# =============================================================================
# MQTT Admin User Credentials
# IMPORTANT: Change these in production!
MQTT_ADMIN_USER=admin
MQTT_ADMIN_PASSWORD=your_mqtt_password_here

# Mosquitto Configuration
MOSQUITTO_LOG_LEVEL=information
MOSQUITTO_MAX_CONNECTIONS=1000
MOSQUITTO_MAX_QUEUED_MESSAGES=100
MOSQUITTO_AUTOSAVE_INTERVAL=1800

# =============================================================================
# INFLUXDB 2.x CONFIGURATION
# =============================================================================
# Authentication & Access
# IMPORTANT: Change these in production!
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=your_influxdb_password_here
INFLUXDB_ADMIN_TOKEN=your_influxdb_token_here
INFLUXDB_HTTP_AUTH_ENABLED=false

# Database Configuration
INFLUXDB_DB=renewable_energy
INFLUXDB_ORG=renewable_energy_org
INFLUXDB_BUCKET=renewable_energy
INFLUXDB_RETENTION=30d

# Initial Setup
INFLUXDB_SETUP_MODE=setup

# Performance & Storage
INFLUXDB_META_DIR=/var/lib/influxdb2/meta
INFLUXDB_DATA_DIR=/var/lib/influxdb2/data
INFLUXDB_WAL_DIR=/var/lib/influxdb2/wal
INFLUXDB_ENGINE_PATH=/var/lib/influxdb2/engine
INFLUXDB_MAX_CONCURRENT_COMPACTIONS=0

# HTTP Configuration
INFLUXDB_HTTP_BIND_ADDRESS=:8086
INFLUXDB_HTTP_PORT=8086
INFLUXDB_HTTP_MAX_CONNECTION_LIMIT=0
INFLUXDB_HTTP_READ_TIMEOUT=30s

# Logging & Monitoring
INFLUXDB_LOGGING_LEVEL=info
INFLUXDB_LOGGING_FORMAT=auto
INFLUXDB_METRICS_DISABLED=true
INFLUXDB_PPROF_ENABLED=false
INFLUXDB_REPORTING_DISABLED=true

# =============================================================================
# NODE-RED CONFIGURATION
# =============================================================================
# Node-RED Authentication
# IMPORTANT: Change these in production!
NODE_RED_USERNAME=admin
NODE_RED_PASSWORD=your_nodered_password_here
NODE_RED_CREDENTIAL_SECRET=your_nodered_secret_here

# Node-RED InfluxDB Integration
NODE_RED_INFLUXDB_URL=http://influxdb:8086
NODE_RED_INFLUXDB_ORG=renewable_energy_org
NODE_RED_INFLUXDB_BUCKET=renewable_energy
NODE_RED_INFLUXDB_TOKEN=your_influxdb_token_here
INFLUXDB_TOKEN=your_influxdb_token_here

# =============================================================================
# GRAFANA CONFIGURATION
# =============================================================================
# Grafana Authentication
# IMPORTANT: Change these in production!
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_grafana_password_here

# Grafana Server Configuration
# For local development with Nginx:
#   GF_SERVER_ROOT_URL=http://localhost:8080/grafana
# For production with Nginx:
#   GF_SERVER_ROOT_URL=http://your-domain.com:20108/grafana
GF_SERVER_ROOT_URL=http://localhost:8080/grafana
# Must be true when using Nginx reverse proxy with sub-path
GF_SERVER_SERVE_FROM_SUB_PATH=true

# =============================================================================
# API BACKEND (Express.js) CONFIGURATION
# =============================================================================
# InfluxDB Configuration
INFLUXDB_URL=http://influxdb:8086
TEST_TOKEN=your_influxdb_token_here

# CORS Configuration
# For local development:
#   CORS_ORIGIN=http://localhost:8080,http://localhost:3002,http://localhost:5173
# For production:
#   CORS_ORIGIN=http://your-domain.com:20108
CORS_ORIGIN=http://localhost:8080,http://localhost:3002,http://localhost:5173

# =============================================================================
# FRONTEND (React/Vite) CONFIGURATION
# =============================================================================
# API Configuration
# For local development with Nginx:
#   VITE_API_URL=http://localhost:8080
#   VITE_API_BASE_URL=http://localhost:8080/api
# For production with Nginx:
#   VITE_API_URL=http://your-domain.com:20108/api
#   VITE_API_BASE_URL=http://your-domain.com:20108/api
VITE_API_URL=http://localhost:8080
VITE_API_BASE_URL=http://localhost:8080/api

# =============================================================================
# SECURITY NOTES
# =============================================================================
# IMPORTANT: When creating your .env.local or .env.production file:
# 
# 1. Replace all "your_*_password_here" and "your_*_token_here" with actual values
# 2. Use strong, unique passwords for each service
# 3. Generate secure tokens using: openssl rand -hex 32
# 4. Never commit .env.local or .env.production to Git
# 5. Update SERVER_IP and URLs for your environment
# 
# Services that need password changes:
# - MQTT_ADMIN_PASSWORD
# - INFLUXDB_ADMIN_PASSWORD
# - INFLUXDB_ADMIN_TOKEN
# - GRAFANA_ADMIN_PASSWORD
# - NODE_RED_PASSWORD
# - NODE_RED_CREDENTIAL_SECRET

# =============================================================================
# LOCAL DEVELOPMENT SETUP
# =============================================================================
# 1. Copy this file: cp env.example .env.local
# 2. Edit .env.local and replace all "your_*_here" placeholders
# 3. Update SERVER_IP=localhost
# 4. Update NGINX_PORT=8080
# 5. Update URLs to use localhost:8080
# 6. Run: docker-compose -f docker-compose.local.yml --env-file .env.local up -d
# 
# Access services:
# - Grafana: http://localhost:8080/grafana/
# - Node-RED: http://localhost:8080/nodered/
# - InfluxDB: http://localhost:8080/influxdb/
# - API: http://localhost:8080/api/
# - Frontend: http://localhost:8080/app/
# - MQTT: localhost:1883

# =============================================================================
# PRODUCTION SETUP (Mikrus VPS)
# =============================================================================
# 1. Copy this file: cp env.example .env.production
# 2. Edit .env.production and replace all "your_*_here" placeholders
# 3. Update SERVER_IP=robert108.mikrus.xyz (or your production domain)
# 4. Update SERVER_PORT=10108 (or your SSH port)
# 5. Update NGINX_PORT=20108
# 6. Update NGINX_HTTPS_PORT=30108
# 7. Update MQTT_PORT=40098
# 8. Update URLs to use your production domain and port
# 9. Run: docker-compose --env-file .env.production up -d
# 
# Access services:
# - Grafana: http://robert108.mikrus.xyz:20108/grafana/
# - Node-RED: http://robert108.mikrus.xyz:20108/nodered/
# - InfluxDB: http://robert108.mikrus.xyz:20108/influxdb/
# - API: http://robert108.mikrus.xyz:20108/api/
# - Frontend: http://robert108.mikrus.xyz:20108/app/
# - MQTT: robert108.mikrus.xyz:40098

